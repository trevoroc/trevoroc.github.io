{"version":3,"sources":["webpack:///webpack/bootstrap e2968984200bdad676df","webpack:///./util/util.js","webpack:///./audio/audio.js","webpack:///./visual/ripples.js","webpack:///./ZenPond.js","webpack:///./audio/hold_envelope.js","webpack:///./audio/node_builders.js","webpack:///./audio/release_envelope.js"],"names":["KEYS_TO_FREQUENCIES","KEYS_TO_NOTES","mapKeyToIndex","Object","keys","indexOf","key","mapKeyToLocation","width","height","i","x","y","Math","floor","audioCtx","window","AudioContext","webkitAudioContext","oscillators","on","keyName","e","console","log","undefined","oscillator","gainNode","createGain","envelope","gain","start","currentTime","connect","destination","trigger","setTimeout","stopOscillator","stopTime","release","off","oscillatorObj","releaseTime","stop","addListeners","document","addEventListener","setUpCanvas","canvas","getElementById","body","clientWidth","clientHeight","ctx","getContext","halfWidth","halfHeight","size","rippleMap","prevMap","rippleRadius","lineWidth","step","count","prevIndex","newIndex","palette","startHeight","endHeight","fillStyle","fillRect","texture","getImageData","ripple","run","timestamp","newFrame","putImageData","requestAnimationFrame","disturb","j","xOffset","yOffset","data","currentPixel","newPixel","prevData","temp","_newIndex","_prevIndex","startRipple","location","showNote","note","getElementsByClassName","noteX","noteY","style","left","toString","top","classList","toggle","HoldEnvelope","param","attackTime","decayTime","sustainTime","stopCallback","now","cancelScheduledValues","setValueAtTime","linearRampToValueAtTime","totalAttackTime","totalDecayTime","totalSustainTime","buildOscillator","frequency","createOscillator","value","ReleaseEnvelope","totalReleaseTime"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e2968984200bdad676df","export const KEYS_TO_FREQUENCIES = {\n  'q': 261.63,\n  '2': 277.18,\n  'w': 293.66,\n  '3': 311.13,\n  'e': 329.63,\n  'r': 349.23,\n  '5': 369.99,\n  't': 392.00,\n  '6': 415.30,\n  'y': 440.00,\n  '7': 466.16,\n  'u': 493.88,\n  'i': 523.25,\n  'a': 554.37,\n  'z': 587.33,\n  's': 622.25,\n  'x': 659.26,\n  'c': 698.46,\n  'f': 739.99,\n  'v': 783.99,\n  'g': 830.61,\n  'b': 880.00,\n  'h': 932.33,\n  'n': 987.77,\n  'm': 1046.50\n};\n\nexport const KEYS_TO_NOTES = {\n  'q': 'C',\n  '2': 'C♯',\n  'w': 'D',\n  '3': 'E♭',\n  'e': 'E',\n  'r': 'F',\n  '5': 'F♯',\n  't': 'G',\n  '6': 'A♭',\n  'y': 'A',\n  '7': 'B♭',\n  'u': 'B',\n  'i': 'C',\n  'a': 'C♯',\n  'z': 'D',\n  's': 'E♭',\n  'x': 'E',\n  'c': 'F',\n  'f': 'F♯',\n  'v': 'G',\n  'g': 'A♭',\n  'b': 'A',\n  'h': 'B♭',\n  'n': 'B',\n  'm': 'C'\n};\n\nconst mapKeyToIndex = key => Object.keys(KEYS_TO_FREQUENCIES).indexOf(key);\n\nexport const mapKeyToLocation = (key, width, height) => {\n  const i = mapKeyToIndex(key);\n\n  if (i === -1) {\n    return null;\n  } else {\n    const x = ((i % 6) + 1) * width / 6;\n    const y = (Math.floor(i / 6) + 1) * height / 5;\n\n    return [x, y];\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./util/util.js","import { KEYS_TO_FREQUENCIES } from '../util/util';\nimport HoldEnvelope from './hold_envelope';\nimport ReleaseEnvelope from './release_envelope';\nimport { buildOscillator } from './node_builders';\n\nconst audioCtx = new (window.AudioContext || window.webkitAudioContext)();\nconst oscillators = {};\n\nconst on = e => {\n  const keyName = e.key;\n  console.log(`keydown: ${e.key}`);\n\n  if (oscillators[keyName] === undefined && KEYS_TO_FREQUENCIES[keyName]) {\n    const oscillator = buildOscillator(KEYS_TO_FREQUENCIES[keyName], audioCtx);\n    const gainNode = audioCtx.createGain();\n    const envelope = new HoldEnvelope(gainNode.gain, audioCtx);\n\n    oscillator.start(audioCtx.currentTime);\n    oscillator.connect(gainNode);\n    gainNode.connect(audioCtx.destination);\n\n    console.log(`On trigger: ${audioCtx.currentTime}`);\n    envelope.trigger(stopTime => setTimeout(stopOscillator(oscillator, keyName),\n                                            stopTime * 1000));\n\n    // console.log(keyName);\n    const release = new ReleaseEnvelope(gainNode.gain, audioCtx);\n    oscillators[keyName] = {\n      oscillator,\n      gainNode,\n      release\n    };\n\n    // console.log('on');\n    // clearOscillators();\n  }\n\n  console.log(oscillators);\n};\n\nconst off = e => {\n  const keyName = e.key;\n  console.log(`keyup: ${e.key}`);\n\n  if (KEYS_TO_FREQUENCIES[keyName]) {\n    const oscillatorObj = oscillators[keyName];\n\n    oscillatorObj.release.trigger();\n    console.log(`Release trigger: ${audioCtx.currentTime}`);\n\n    let releaseTime = oscillatorObj.release.releaseTime;\n    setTimeout(stopOscillator(oscillatorObj.oscillator, keyName),\n               releaseTime * 1000);\n  }\n\n  // console.log('off');\n  // clearOscillators();\n};\n\nconst stopOscillator = (oscillator, key) => () => {\n  console.log(`stopOscillator: ${audioCtx.currentTime}`);\n  oscillator.stop(audioCtx.currentTime);\n  delete oscillators[key];\n};\n\n// const clearOscillators = (param) => {\n//   console.log('clearing');\n//   const activeKeys = Object.keys(oscillators);\n//\n//   activeKeys.map(key => {\n//     const entry = oscillators[key];\n//\n//     if (entry.gainNode.gain.value === 0) {\n//       console.log(key);\n//       entry.oscillator.stop(audioCtx.currentTime);\n//       delete oscillators[key];\n//     }\n//   });\n// };\n\nconst addListeners = () => {\n  document.addEventListener('keydown', on);\n  document.addEventListener('keyup', off);\n};\n\nexport default addListeners;\n\n\n\n// WEBPACK FOOTER //\n// ./audio/audio.js","import { mapKeyToLocation } from '../util/util';\n\nexport const setUpCanvas = () => {\n  const canvas = document.getElementById('canvas');\n  canvas.width = document.body.clientWidth;\n  canvas.height = document.body.clientHeight;\n  const ctx = canvas.getContext('2d');\n\n  const width = canvas.width;\n  const halfWidth = width >> 1;\n  const height = canvas.height;\n  const halfHeight = height >> 1;\n  const size = width * (height + 2) * 2;\n  const rippleMap = [];\n  const prevMap = [];\n  const rippleRadius = 50;\n  const lineWidth = 20;\n  const step = lineWidth * 2;\n  const count = height / lineWidth;\n\n  let prevIndex = width;\n  let newIndex = width * (height + 3);\n\n  const palette = [\n    '#ddecff',\n    '#c4ddff',\n    '#b4d9ff',\n    '#a4c6f2',\n    '#93c2ff',\n    '#84baff',\n    '#6bacff',\n    '#56a0ff',\n    '#4999ff',\n    '#2d82ef'\n  ];\n\n  let startHeight, endHeight;\n  for (let i = 0; i < 10; i++) {\n    ctx.fillStyle = palette[i];\n    startHeight = Math.floor(i * canvas.height / 10);\n    endHeight = Math.floor((i + 1) * canvas.height / 10);\n    ctx.fillRect(0, startHeight, canvas.width, endHeight);\n  }\n\n  const texture = ctx.getImageData(0, 0, width, height);\n  const ripple = ctx.getImageData(0, 0, width, height);\n\n  for (let i = 0; i < size; i++) {\n    prevMap[i] = rippleMap[i] = 0;\n  }\n\n  // Main loop\n  const run = (timestamp) => {\n    newFrame();\n    ctx.putImageData(ripple, 0, 0);\n    window.requestAnimationFrame(run);\n  };\n\n  // const randomRadius = () => Math.floor(Math.random * 17) + 3;\n\n  // Disturb water at (x, y)\n  const disturb = (x, y) => {\n    x <<= 0;\n    y <<= 0;\n\n    for (let j = y - rippleRadius; j < y + rippleRadius; j++) {\n      for (let i = x - rippleRadius; i < x + rippleRadius; i++) {\n        rippleMap[prevIndex + (j * width) + i] += 128;\n      }\n    }\n  };\n\n  const newFrame = () => {\n    let xOffset, yOffset, data, currentPixel, newPixel, prevData;\n\n    let temp = prevIndex;\n    prevIndex = newIndex;\n    newIndex = temp;\n    let i = 0;\n\n    for (let y = 0; y < height; y++) {\n      for (let x = 0; x < width; x++) {\n        let _newIndex = newIndex + i;\n        let _prevIndex = prevIndex + i;\n\n        data = ( rippleMap[_prevIndex - width] +\n                 rippleMap[_prevIndex + width] +\n                 rippleMap[_prevIndex - 1] +\n                 rippleMap[_prevIndex + 1]) >> 1;\n        data -= rippleMap[_newIndex];\n        data -= data >> 5;\n\n        rippleMap[_newIndex] = data;\n\n        // If the data is 0 then the water is still, otherwise there are waves\n        data = 1024 - data;\n\n        prevData = prevMap[i];\n        prevMap[i] = data;\n\n        if (prevData !== data) {\n          xOffset = (((x - halfWidth) * data / 1024) << 0) + halfWidth;\n          yOffset = (((y - halfHeight) * data / 1024) << 0) + halfHeight;\n\n          if (xOffset >= width) { xOffset = width - 1; }\n          if (xOffset < 0) { xOffset = 0; }\n          if (yOffset >= height) { yOffset = height - 1; }\n          if (yOffset < 0) { yOffset = 0; }\n\n          newPixel = (xOffset + (yOffset * width)) * 4;\n          currentPixel = i * 4;\n\n          ripple.data[currentPixel] = texture.data[newPixel];\n          ripple.data[currentPixel + 1] = texture.data[newPixel + 1];\n          ripple.data[currentPixel + 2] = texture.data[currentPixel + 2];\n        }\n\n        i++;\n      }\n    }\n  };\n\n  const startRipple = (e) => {\n    const key = e.key;\n    const location = mapKeyToLocation(key, width, height);\n\n    if (location) {\n      disturb(...location);\n      showNote(key, ...location);\n    }\n  };\n\n  const showNote = (key, x, y) => {\n    const note = document.getElementsByClassName(key)[0];\n\n    const noteX = x - 47;\n    const noteY = y - 47;\n\n    note.style.left = noteX.toString() + 'px';\n    note.style.top = noteY.toString() + 'px';\n\n    note.classList.toggle('hidden');\n    setTimeout(() => (note.classList.toggle('hidden')), 200);\n  };\n\n  window.requestAnimationFrame(run);\n\n  // set up listeners\n  document.addEventListener('keydown', startRipple);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./visual/ripples.js","import addListeners from './audio/audio';\nimport { setUpCanvas } from './visual/ripples';\n\ndocument.addEventListener('DOMContentLoaded', addListeners);\ndocument.addEventListener('DOMContentLoaded', e => {\n  setUpCanvas();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./ZenPond.js","// NB: The node parameter MUST implement the AudioParam interface from the Web\n// Audio API\nclass HoldEnvelope {\n  constructor(param, ctx) {\n    this.param = param;\n    this.ctx = ctx;\n\n    this.attackTime = 0.1;\n    this.decayTime = 0.1;\n    this.sustainTime = 5;\n  }\n\n  totalAttackTime() {\n    return this.attackTime;\n  }\n\n  totalDecayTime() {\n    return this.attackTime + this.decayTime;\n  }\n\n  totalSustainTime() {\n    return this.attackTime + this.decayTime + this.sustainTime;\n  }\n\n  trigger(stopCallback) {\n    const now = this.ctx.currentTime;\n\n    this.param.cancelScheduledValues(now);\n    this.param.setValueAtTime(0, now);\n\n    // console.log('attack');\n    // debugger;\n    // Set attack\n    this.param.linearRampToValueAtTime(1, now + this.totalAttackTime());\n\n    // Set decay\n    this.param.linearRampToValueAtTime(.6, now + this.totalDecayTime());\n\n    // Set sustain\n    this.param.linearRampToValueAtTime(0, now + this.totalSustainTime());\n    stopCallback(this.totalSustainTime());\n  }\n}\n\nexport default HoldEnvelope;\n\n\n\n// WEBPACK FOOTER //\n// ./audio/hold_envelope.js","export const buildOscillator = (frequency, ctx) => {\n  const oscillator = ctx.createOscillator();\n  oscillator.frequency.value = frequency;\n  return oscillator;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./audio/node_builders.js","class ReleaseEnvelope {\n  constructor(param, ctx) {\n    this.param = param;\n    this.ctx = ctx;\n\n    this.releaseTime = 0.25;\n  }\n\n  totalReleaseTime() {\n    return this.releaseTime;\n  }\n\n  trigger() {\n    const now = this.ctx.currentTime;\n\n    this.param.cancelScheduledValues(now);\n\n    // Set release\n    this.param.linearRampToValueAtTime(0, now + this.totalReleaseTime());\n  }\n}\n\nexport default ReleaseEnvelope;\n\n\n\n// WEBPACK FOOTER //\n// ./audio/release_envelope.js"],"sourceRoot":""}